<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
	<property>
		<name>mapred.job.tracker</name>
		<value>fc5:8021</value>
	</property>

	<property>
		<name>mapred.reduce.parallel.copies</name>
		<value>2</value>
	</property>

	<property>
		<name>mapred.reduce.slowstart.completed.maps</name>
		<value>0.8</value>
	</property>

	<property>
		<name>mapred.reduce.tasks</name>
		<value>4</value>
	</property>

	<!-- スロット -->
	<property>
		<name>mapred.tasktracker.map.tasks.maximum</name>
		<value>4</value>
	</property>

	<property>
		<name>mapred.tasktracker.reduce.tasks.maximum</name>
		<value>4</value>
	</property>

	<!-- 中間データの圧縮 -->
	<property>
		<name>mapred.compress.map.output</name>
		<value>true</value>
	</property>
	<property>
		<name>mapred.map.output.compression.codec</name>
		<value>org.apache.hadoop.io.compress.SnappyCodec</value>
	</property>

	<property>
		<name>mapred.output.compression.type</name>
		<value>BLOCK</value>
	</property>

	<property>
		<name>tasktracker.http.threads</name>
		<value>40</value>
	</property>

	<property>
		<name>io.sort.mb</name>
		<value>256</value>
	</property>

	<property>
		<name>io.sort.factor</name>
		<value>64</value>
	</property>

	<!-- スケジューラー -->
	<property>
		<name>mapred.jobtracker.taskScheduler</name>
		<value>org.apache.hadoop.mapred.CapacityTaskScheduler</value>
	</property>

	<!--タスク実行環境 -->
	<property>
		<name>mapred.map.child.java.opts</name>
		<value>-Xms512m -Xmx2048m</value>
	</property>
	<property>
		<name>mapred.reduce.child.java.opts</name>
		<value>-Xms512m -Xmx2048m</value>
	</property>

	<!-- メモリ管理 
	なんかうごかないっぽい
	<property>
		<name>mapred.task.maxvmem</name>
		<value>0</value>
	</property>
	<property>
		<name>mapred.task.maxpmem</name>
		<value>4096m</value>
	</property>
-->
	<!-- メモリ監視 -->
	<property>
		<name>mapred.tasktracker.vmem.reserved</name>
		<value>0</value>
	</property>
	<property>
		<name>mapred.task.default.maxvmem</name>
		<value>0</value>
	</property>
	<property>
		<name>mapred.task.limit.maxvmem</name>
		<value>0</value>
	</property>
	<property>
		<name>mapred.tasktracker.taskmemorymanager.monitoring-interval</name>
		<value>5000</value>
	</property>
	<property>
		<name>mapred.tasktracker.pmem.reserved</name>
		<value>10240m</value>
	</property>
</configuration>
